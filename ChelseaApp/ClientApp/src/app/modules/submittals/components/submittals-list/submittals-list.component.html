<div class="submittals_wrapper">
    <div class="container">
        <div class="tabie_wrapper">
            <div class="__t_top">
                <div class="__t_itms">
                    <div class="list_heading">Submittals</div>
                    <div *ngIf="totalRecords && totalRecords>0">
                        Showing
                        <strong>{{pagingInfo.start}}</strong>
                        to
                        <strong>{{pagingInfo.end}}</strong>
                        of
                        <strong>{{totalRecords}}</strong>
                        Submittals
                    </div>
                </div>
                <div class="_t_right">
                    <div class="_t_sarch">
                        <input type="text" class="search_input" placeholder="Search" [(ngModel)]="searchText"
                            (keyup.enter)="searchList()">
                        <img (click)="searchList()" class="search-icon" src="../../../assets/images/search_icon.png"
                            alt="search icon" />
                    </div>
                    <button [routerLink]="['/submittals/form/0/step/1']" type="button" class="btn __btn __theme">New
                        Submittals</button>
                </div>
            </div>
            <div class="__t_content" *ngIf="isListFetch">
                <p-table [value]="list" [lazy]="true" [paginator]="true" [rows]="pageSize" scrollHeight="65vh"
                    [totalRecords]="totalRecords" [showCurrentPageReport]="true" responsiveLayout="scroll"
                    [rowsPerPageOptions]="rowsPerPageOptions" (onLazyLoad)="nextPage($event)"
                    currentPageReportTemplate=" " (onPage)="paginate($event)" class="__chelsea_tbl __submittals_table">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Output Submittals</th>
                           
                          <th>Submittals</th>
                            <th>Status</th>
                            <th>Created By</th>
                            <th>Date Created</th>
                            <th class="text-center">Action</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item>
                      <tr>
                        <td>
                          <div class="flex">
                            <!--<img class="__t_img" *ngIf="!(item.fileName != null && item.fileName != '')" src="{{item.thumbnailUrl}}"
                                 onError="this.src='../../../../../assets/images/placeholder.png'" alt="">
                            <img class="__t_img" [routerLink]="'/submittals/merge/'+item.id+''"
                                 *ngIf="item.fileName != null && item.fileName != ''" src="{{item.thumbnailUrl}}"
                                 onError="this.src='../../../../../assets/images/placeholder.png'" alt="">-->
                            <div class="__info" *ngIf="!(item.fileName != null && item.fileName != '')">
                              <p class="item_name">{{item.jobName}}</p>
                              <p class="__size" *ngIf="item.fileSize>0">{{niceBytes(item.fileSize)}}</p>
                            </div>
                             <div class="__info"
                                  *ngIf="item.fileName != null && item.fileName != ''">
                               <a href="{{item.fileUrl}}" target="_blank">
                                 <p class="item_name">{{item.jobName}}</p>
                                 <p class="__size" *ngIf="item.fileSize>0">{{niceBytes(item.fileSize)}}</p>
                               </a>
                              
                            </div>
                          </div>
                        </td>
                      
                        <td>
                          <p>
                            {{item.submittals}}
                          </p>
                        </td>
                        <td>
                          <p>
                            {{item.isDraft? 'Draft': (item.isDraft==null?'New':'Merged')}}
                          </p>
                        </td>
                        <td>
                          <p class="__name">{{item.createdBy}}</p>
                        </td>
                        <td>
                          <p class="__date">{{item.createdDate | date:'MM/d/yyyy' }}</p>
                        </td>
                        <td class="action-cell" style="width: 187px;text-align:right;">
                          <a tooltipPosition="left" pTooltip="Download" class="__a_cta"
                             href="{{item.fileUrl}}" download="{{item.jobName}}.pdf"
                             *ngIf="item.fileName != null && item.fileName != ''">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <circle cx="16" cy="16" r="16" transform="rotate(90 16 16)" fill="#EEEEEE" />
                              <path d="M16 19.875C15.9 19.875 15.8083 19.8583 15.725 19.825C15.6417 19.7917 15.5583 19.7333 15.475 19.65L11.7 15.875C11.55 15.725 11.4792 15.5458 11.4875 15.3375C11.4958 15.1292 11.575 14.95 11.725 14.8C11.875 14.65 12.0542 14.575 12.2625 14.575C12.4708 14.575 12.65 14.65 12.8 14.8L15.25 17.275V8.75C15.25 8.53333 15.3208 8.35417 15.4625 8.2125C15.6042 8.07083 15.7833 8 16 8C16.2167 8 16.3958 8.07083 16.5375 8.2125C16.6792 8.35417 16.75 8.53333 16.75 8.75V17.275L19.225 14.8C19.375 14.65 19.5542 14.575 19.7625 14.575C19.9708 14.575 20.15 14.65 20.3 14.8C20.45 14.95 20.525 15.1292 20.525 15.3375C20.525 15.5458 20.45 15.725 20.3 15.875L16.525 19.65C16.4417 19.7333 16.3583 19.7917 16.275 19.825C16.1917 19.8583 16.1 19.875 16 19.875ZM9.5 24C9.1 24 8.75 23.85 8.45 23.55C8.15 23.25 8 22.9 8 22.5V19.675C8 19.4583 8.07083 19.2792 8.2125 19.1375C8.35417 18.9958 8.53333 18.925 8.75 18.925C8.96667 18.925 9.14583 18.9958 9.2875 19.1375C9.42917 19.2792 9.5 19.4583 9.5 19.675V22.5H22.5V19.675C22.5 19.4583 22.5708 19.2792 22.7125 19.1375C22.8542 18.9958 23.0333 18.925 23.25 18.925C23.4667 18.925 23.6458 18.9958 23.7875 19.1375C23.9292 19.2792 24 19.4583 24 19.675V22.5C24 22.9 23.85 23.25 23.55 23.55C23.25 23.85 22.9 24 22.5 24H9.5Z" fill="#333333" />
                            </svg>
                          </a>
                          <span tooltipPosition="left" pTooltip="Copy" class="__a_cta" (click)="fnClone(item.id)">
                            <svg class="hover-outer pointer" width="19" height="22" viewBox="0 0 19 22"
                                 fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M5.8749 18.1C5.3249 18.1 4.85407 17.9042 4.4624 17.5125C4.07074 17.1208 3.8749 16.65 3.8749 16.1V2.35C3.8749 1.81667 4.07074 1.35417 4.4624 0.9625C4.85407 0.570833 5.3249 0.375 5.8749 0.375H16.6249C17.1582 0.375 17.6207 0.570833 18.0124 0.9625C18.4041 1.35417 18.5999 1.81667 18.5999 2.35V16.1C18.5999 16.65 18.4041 17.1208 18.0124 17.5125C17.6207 17.9042 17.1582 18.1 16.6249 18.1H5.8749ZM5.8749 16.1H16.6249V2.35H5.8749V16.1ZM2.3749 21.575C1.84157 21.575 1.37907 21.3792 0.987402 20.9875C0.595736 20.5958 0.399902 20.1333 0.399902 19.6V5.625C0.399902 5.35833 0.495736 5.12917 0.687402 4.9375C0.879069 4.74583 1.11657 4.65 1.3999 4.65C1.68324 4.65 1.91657 4.74583 2.0999 4.9375C2.28324 5.12917 2.3749 5.35833 2.3749 5.625V19.6H13.1249C13.3916 19.6 13.6207 19.6958 13.8124 19.8875C14.0041 20.0792 14.0999 20.3167 14.0999 20.6C14.0999 20.8833 14.0041 21.1167 13.8124 21.3C13.6207 21.4833 13.3916 21.575 13.1249 21.575H2.3749ZM5.8749 2.35V16.1V2.35Z"
                                    fill="#333333" />
                            </svg>

                          </span>



                          <span tooltipPosition="left" pTooltip="Edit" class="__a_cta"
                                [routerLink]="'/submittals/form/'+item.id+'/step/1'">
                            <svg class="hover-btn pointer" width="32" height="32" viewBox="0 0 32 32"
                                 fill="none" xmlns="http://www.w3.org/2000/svg">
                              <circle cx="16" cy="16" r="16" transform="rotate(90 16 16)" fill="#EEEEEE" />
                              <path d="M23.8998 11.475L20.6248 8.2L21.6248 7.2C21.9415 6.88334 22.329 6.72917 22.7873 6.7375C23.2456 6.74584 23.6415 6.90834 23.9748 7.225L24.9248 8.15C25.2581 8.48334 25.4123 8.875 25.3873 9.325C25.3623 9.775 25.1915 10.1583 24.8748 10.475L23.8998 11.475ZM7.9248 25.175C7.64147 25.175 7.40397 25.0792 7.2123 24.8875C7.02064 24.6958 6.9248 24.4583 6.9248 24.175V22.3C6.9248 22.1833 6.9498 22.0667 6.9998 21.95C7.0498 21.8333 7.1248 21.725 7.2248 21.625L19.5748 9.25L22.8498 12.5L10.4998 24.875C10.3831 24.975 10.2665 25.05 10.1498 25.1C10.0331 25.15 9.90814 25.175 9.7748 25.175H7.9248Z"
                                    fill="#333333" />
                            </svg>
                          </span>
                          <span tooltipPosition="left" pTooltip="Delete" class="__a_cta" (click)="handleRemoveSelectedSubmittal(item.id)">
                            <svg class="hover-outer pointer" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">

                              <path d="M10.3999 25.35C9.86657 25.35 9.40407 25.1542 9.0124 24.7625C8.62074 24.3708 8.4249 23.9083 8.4249 23.375V9.375H8.1499C7.86657 9.375 7.62907 9.27917 7.4374 9.0875C7.24574 8.89583 7.1499 8.65833 7.1499 8.375C7.1499 8.09167 7.24574 7.85417 7.4374 7.6625C7.62907 7.47083 7.86657 7.375 8.1499 7.375H12.4749C12.4749 7.09167 12.5707 6.85417 12.7624 6.6625C12.9541 6.47083 13.1916 6.375 13.4749 6.375H18.5249C18.8082 6.375 19.0499 6.475 19.2499 6.675C19.4499 6.875 19.5499 7.10833 19.5499 7.375H23.8499C24.1332 7.375 24.3707 7.47083 24.5624 7.6625C24.7541 7.85417 24.8499 8.09167 24.8499 8.375C24.8499 8.65833 24.7541 8.89583 24.5624 9.0875C24.3707 9.27917 24.1332 9.375 23.8499 9.375H23.5749V23.375C23.5749 23.9083 23.3791 24.3708 22.9874 24.7625C22.5957 25.1542 22.1332 25.35 21.5999 25.35H10.3999ZM10.3999 9.375V23.375H21.5999V9.375H10.3999ZM12.9999 20.475C12.9999 20.7083 13.0832 20.9083 13.2499 21.075C13.4166 21.2417 13.6166 21.325 13.8499 21.325C14.0999 21.325 14.3082 21.2417 14.4749 21.075C14.6416 20.9083 14.7249 20.7083 14.7249 20.475V12.25C14.7249 12 14.6374 11.7875 14.4624 11.6125C14.2874 11.4375 14.0832 11.35 13.8499 11.35C13.5999 11.35 13.3957 11.4375 13.2374 11.6125C13.0791 11.7875 12.9999 12 12.9999 12.25V20.475ZM17.2749 20.475C17.2749 20.7083 17.3624 20.9083 17.5374 21.075C17.7124 21.2417 17.9166 21.325 18.1499 21.325C18.3999 21.325 18.6082 21.2417 18.7749 21.075C18.9416 20.9083 19.0249 20.7083 19.0249 20.475V12.25C19.0249 12 18.9374 11.7875 18.7624 11.6125C18.5874 11.4375 18.3832 11.35 18.1499 11.35C17.8999 11.35 17.6916 11.4375 17.5249 11.6125C17.3582 11.7875 17.2749 12 17.2749 12.25V20.475ZM10.3999 9.375V23.375V9.375Z" fill="#333333"></path>
                            </svg>

                          </span>

                        </td>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                      <tr>
                        <td colspan="6" class="text-center">No record founds!!!</td>
                      </tr>
                        
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
<p-toast position="top-center" key="list"></p-toast>
